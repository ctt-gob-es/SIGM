<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xml:lang="es" lang="es">
    <h:head>
    	
    </h:head>
 
    <h:body>
    	<ui:composition template="/template/layoutWithOutMenu.xhtml">
    	 	<ui:define name="head">
				<script type="text/javascript" src="#{webParam.entryParameters['URLRoot']}/js/dialog.js"></script>
			</ui:define>
    		<ui:define name="breadcrumb">
    			<ol><li><h:outputText  value="#{msgs.labelChangeOffice}" /></li></ol>
    		</ui:define>
    		<ui:define name="content">
    		<h:form id="form">
    		<h2><h:outputText  value="#{msgs.labelChangeOffice}" /></h2>
    		<div class="sombra"></div>
    		<p></p>
    		<div align="center">
    			<div style="width: 50%"> 
		    		<p:dataTable id="offices" rowKey="#{office.code}" summary="Tabla de Oficinas" var="office" value="#{changeOfficeAction.listOtherOffice}" paginator="false"
		    			selection="#{changeOfficeAction.selectedOffice}"  selectionMode="single" dblClickSelect="true"
		    			emptyMessage="No hay oficinas disponibles" scrollable="true" scrollHeight="250">  
		    			<p:ajax event="rowDblselect"
										listener="#{changeOfficeAction.onRowSelectNavigateInit}" />
					        <f:facet name="header">  
					        </f:facet>  
					        <p:column headerText="Código" style="width:25%">  
					            #{office.acron}  
					        </p:column>  
					       <p:column headerText="Nombre" style="width:75%">  
					            #{office.name}  
					        </p:column>  
					        <f:facet name="footer"></f:facet>  
					    </p:dataTable> 					    
					    <p:dialog id="dialog" widgetVar="dialog"  draggable="false" header="Validación" resizable="false"  modal="true">
							<p:messages id="dialogMessage" showDetail="true" />  
						</p:dialog>
					     <div class="botones">
					       <p:commandButton styleClass="boton-cancelar"  value="#{msgs.labelBotonCambiar}" process="@form" update="dialogMessage" oncomplete="showMessage(xhr, status, args)" actionListener="#{changeOfficeAction.change}" /> 
							<p:commandButton styleClass="boton-cancelar" value="#{msgs.labelBotonCancelar}" process="@this" action="goInicioForm" /> 
						</div> 
				</div>
    		</div>
    			</h:form>
    		</ui:define>

    	</ui:composition>
    	
    	
    </h:body>
 
</html>